# ADR 003: Выбор шины для real-time уведомлений

**Дата:** 2025-04-05  
**Участники:** Руководитель мобильной команды, DevOps Engineer, Backend Developer

## Статус

Принято  
_2025-04-05_

## Контекст

Требуется выбрать технологию для отправки realtime-уведомлений клиентским приложениям без задержек.

## Варианты решения

1. **NATS JetStream**
   - ✅ _Плюсы_: низкая latency, поддержка stream processing
   - ❌ _Минусы_: меньше community и готовых решений
2. **WebSocket через API Gateway**
   - ✅ _Плюсы_: просто реализовать
   - ❌ _Минусы_: сложно масштабировать, высокая нагрузка на gateway
3. **Firebase Cloud Messaging / FCM**
   - ✅ _Плюсы_: native push для Android/iOS
   - ❌ _Минусы_: vendor lock-in, ограничения на частоту сообщений

## Решение

**Выбранный вариант:** NATS JetStream  
**Обоснование:** Подходит для internal real-time коммуникаций. FCM дополняет его для внешних пушей.

## Последствия

- **Положительные:** Высокая отзывчивость, низкая задержка
- **Отрицательные:** Требует интеграции с мобильным клиентом
- **Риски:** Возможно потребуется fallback на HTTP polling
