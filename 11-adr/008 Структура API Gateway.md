# ADR 008: Структура API Gateway

**Дата:** 2025-04-05  
**Участники:** Архитектор, Security Engineer, Backend Developer

## Статус

Принято  
_2025-04-05_

## Контекст

Нужно определить, как организовать маршрутизацию, авторизацию и безопасность через API Gateway.

## Варианты решения

1. **Единый API Gateway**
   - ✅ _Плюсы_: Централизованное управление
   - ❌ _Минусы_: Single point of failure, сложность политики
2. **Разделенные gateway**
   - ✅ _Плюсы_: Разделение зон безопасности, разные политики
   - ❌ _Минусы_: Увеличение числа компонентов
3. **Service Mesh + Sidecar proxies**
   - ✅ _Плюсы_: Распределенный подход
   - ❌ _Минусы_: Сложность настройки

## Решение

**Выбранный вариант:** Разделенные gateway  
**Обоснование:** External — для клиентских запросов, Internal — для микросервисов, Analytics — для heavy query loading.

## Последствия

- **Положительные:** Лучшая безопасность и разделение зон
- **Отрицательные:** Нужно согласовывать версионирование и контракты
- **Риски:** Возможны проблемы с кэшированием и rate limiting
