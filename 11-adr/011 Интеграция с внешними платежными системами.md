# ADR 011: Интеграция с внешними платежными системами

**Дата:** 2025-04-05  
**Участники:** FinTech Engineer, Security Lead, Backend Developer

## Статус

Принято  
_2025-04-05_

## Контекст

Нужно выбрать способ интеграции с внешними платежными провайдерами (Stripe, PayPal, Apple Pay) с учетом безопасности и соответствия PCI DSS.

## Варианты решения

1. **Direct API integration через DMZ**
   - ✅ _Плюсы_: Простота реализации
   - ❌ _Минусы_: Повышает требования к сертификации
2. **Интеграционная платформа (например, Adyen или Braintree)**
   - ✅ _Плюсы_: Готовые SDK, поддержка множества методов
   - ❌ _Минусы_: Комиссии, vendor lock-in
3. **API Gateway + BFF (Backend For Frontend) для пэйментов**
   - ✅ _Плюсы_: Абстракция от провайдера, упрощает смену
   - ❌ _Минусы_: Дополнительный уровень проксирования

## Решение

**Выбранный вариант:** API Gateway + BFF  
**Обоснование:** Минимизирует зависимость от одного провайдера, позволяет абстрагировать внутренние сервисы от внешних.

## Последствия

- **Положительные:** Гибкость к изменению платежных партнеров
- **Отрицательные:** Нужен дополнительный модуль в API Gateway
- **Риски:** Возможны проблемы с конверсией валют и налоговыми правилами
