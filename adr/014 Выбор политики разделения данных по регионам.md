# ADR 014: Выбор политики разделения данных по регионам

**Дата:** 2025-04-06  
**Участники:** Data Protection Officer, Compliance Manager, DevOps Lead

## Статус

Принято  
_2025-04-06_

## Контекст

Требуется определить, как данные пользователей будут храниться и реплицироваться между регионами в соответствии с законодательством и требованиями GDPR/CCPA.

## Варианты решения

1. **Centralized storage**
   - ✅ _Плюсы_: Единая БД, проще управлять аналитикой
   - ❌ _Минусы_: Нарушает требования локализации
2. **Regional data isolation**
   - ✅ _Плюсы_: Соответствие GDPR/CCPA
   - ❌ _Минусы_: Сложности с cross-region аналитикой
3. **Global catalog + regional shards**
   - ✅ _Плюсы_: Баланс между compliance и возможностью анализа
   - ❌ _Минусы_: Требует сложной маршрутизации запросов

## Решение

**Выбранный вариант:** Global catalog + regional shards  
**Обоснование:** Метаданные и аналитика могут быть глобальными при условии анонимизации, но персональные данные хранятся в регионе пользователя.

## Последствия

- **Положительные:** Соблюдение требований регуляторов, масштабируемость
- **Отрицательные:** Сложность реализации маршрутизации на уровне API Gateway
- **Риски:** Ошибки в маршрутизации могут привести к утечке данных
