# ADR 012: Оффлайн-режим мобильного клиента

**Дата:** 2025-04-05  
**Участники:** Mobile Architect, UX Designer, Backend Developer

## Статус

Принято  
_2025-04-05_

## Контекст

Требуется реализовать функционал работы мобильного приложения в условиях плохого интернет-соединения.

## Варианты решения

1. **Локальное хранение SQLite + двухфазный sync**
   - ✅ _Плюсы_: Полная история тренировок, offline editing
   - ❌ _Минусы_: Сложность merge-логики
2. **Временное кэширование в Redis + push при восстановлении соединения**
   - ✅ _Плюсы_: Простая реализация
   - ❌ _Минусы_: Ограниченный функционал
3. **PWA + Service Workers**
   - ✅ _Плюсы_: Кросс-платформенно
   - ❌ _Минусы_: Ограничения доступа к железу

## Решение

**Выбранный вариант:** SQLite + двухфазный sync через DMZ  
**Обоснование:** Подходит для длительного оффлайн-режима, например, во время походов или путешествий.

## Последствия

- **Положительные:** Пользователь может продолжать использовать основной функционал
- **Отрицательные:** Требуется реализация conflict resolution logic
- **Риски:** Возможна потеря данных при некорректном мердже
